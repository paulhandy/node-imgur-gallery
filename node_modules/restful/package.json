{
  "name": "restful",
  "description": "Restful routing using resourceful and director.",
  "author": {
    "name": "Nodejitsu Inc.",
    "email": "info@nodejitsu.com"
  },
  "maintainers": [
    {
      "name": "Marak Squires",
      "email": "marak@nodejitsu.com"
    }
  ],
  "version": "0.4.4",
  "main": "./lib/restful",
  "peerDependencies": {
    "director": "1.1.x",
    "resourceful": "0.3.x"
  },
  "dependencies": {
    "director": "1.1.x",
    "director-explorer": "*",
    "resourceful": "0.3.x",
    "utile": "0.1.x",
    "qs": "*"
  },
  "devDependencies": {
    "vows": "0.6.x",
    "api-easy": "0.3.x",
    "flatiron": "0.2.x",
    "union": "0.3.x"
  },
  "optionalDependencies": {},
  "engines": {
    "node": "0.6.x || 0.8.x"
  },
  "scripts": {
    "test": "vows --spec --isolate",
    "start": "node examples/server.js"
  },
  "readme": "# Restful\n\n[![Build Status](https://secure.travis-ci.org/flatiron/restful.png)](http://travis-ci.org/flatiron/restful)\n\nReflects [RESTful](http://en.wikipedia.org/wiki/Representational_state_transfer) [Director](http://github.com/flatiron/director) routers from [resourceful](http://github.com/flatiron/resourceful) resources. Can be used as a stand-alone module or as a [Flatiron](http://github.com/flatiron/) plugin.\n\n# Explanation\n\nThe restful project removes the process of writing boilerplate routing code for interacting with  [resourceful](http://github.com/flatiron/resourceful) resources. Restful uses <a href=\"http://en.wikipedia.org/wiki/Reflection_(computer_programming)\">reflection</a> to reflect an http router interface which maps all the restful routes needed to perform basic [CRUD](http://en.wikipedia.org/wiki/Create,_read,_update_and_delete) operations with [resourceful](http://github.com/flatiron/resourceful). restful also has the ability to expose additional arbitrary <a href=\"#remote\">remote resource methods</a> in it's http router interface. \n\nThrough the removal of this boilerplate code, restful creates a robust, standardized, and re-usable http interface for any [resourceful](http://github.com/flatiron/resourceful) resource.\n\n**Remark:** If you don't like REST and would prefer a socket, use the [socketful](http://github.com/flatiron/socketful) library!\n\n# Installation\n\n     npm install restful\n\n# Usage\n\n## Define resource(s)\n\n```js\nvar resourceful = require('resourceful'),\n    Creature    = resourceful.define('creature');\n\nCreature.property('type', String, { default: \"dragon\" });\nCreature.property('life', Number, { default: 10, minimum: 0, maximum: 20 });\n```\n\n*[additional API documentation for defining resources](http://github.com/flatiron/resourceful)*\n\n## As a Flatiron plugin\n\nTo use restful as a <a href=\"http://github.com/flatiron/flatiron\">Flatiron</a> plugin you will have to:\n\n - Define resource(s) in your Flatiron app\n - Use the restful plugin in your Flatiron app\n - Set `restful=true` on the resource to let Flatiron know to expose it\n\nHere is a code example of using restful as a Flatiron plugin: <a href=\"https://github.com/flatiron/restful/blob/master/examples/app.js\">https://github.com/flatiron/restful/blob/master/examples/app.js</a>\n\n## As a stand-alone server\n\nTo use restful as a stand-alone server you will have to:\n\n - Define resource(s)\n - Create a new server based on the resource(s) using `restful.createServer`\n\nHere is a code example of using restful as a stand-alone server: <a href=\"https://github.com/flatiron/restful/blob/master/examples/standalone-server.js\">https://github.com/flatiron/restful/blob/master/examples/standalone-server.js</a>\n\n## As a middleware / custom router\n\nTo use restful as a HTTP `req` `res` processing middleware you will have to:\n\n  - Define resource(s)\n  - Create a new router based on the resource(s) using `restful.createRouter`\n  - Use the newly created router inside an existing HTTP server\n\nHere is a code example of using restful in a server: <a href=\"https://github.com/flatiron/restful/blob/master/examples/server.js\">https://github.com/flatiron/restful/blob/master/examples/server.js</a>\n\n## Core HTTP REST Mappings\n\n  By default, `restful` will map the following `Resourceful` methods.\n\n    Verb    Path                    Action                 Notes\n\n    GET     /creature           => Creature.all()\n    POST    /creature           => Creature.create()      Create with no-id, id is auto-generated\n    POST    /creature/1         => Creature.create()      Create with id \"1\"\n    GET     /creature/1         => Creature.show()\n    PUT     /creature/1         => Creature.update()\n    DELETE  /creature/1         => Creature.destroy()\n    POST    /creature/1/update  => Creature.update()\n    POST    /creature/1/destroy => Creature.destroy()\n\n  The `Director` router will dispatch all incoming RESTFul urls to the Creature resource and respond back with the appropriate result.\n\n## Non-strict Mappings\n\nYou'll notice that some of the routes defined above are not 100% restful ( such as `POST /creature/1/update` ). \n\nSince not all HTTP clients support PUT and DELETE Verbs ( such as forms in web browsers ), restful maps additional \"non-strict\" rest mappings to make your life slightly easier.\n\nIf you prefer to not use this option, set `{ strict: true }`.\n\n*You might also want to consider using a rails-like approach which uses the convention of a reserved `<form>` input field called \"_method\" which contains either \"PUT\" or \"DELETE\" see: https://github.com/senchalabs/connect/blob/master/lib/middleware/methodOverride.js*\n\n## Relational Resources\n\nTo define relational data in restful you will have to:\n\n - Define the relationship in the resource itself using the resourceful `Resource.parent()` API\n - Create a new router based on the resource(s)\n\nrestful will then properly reflect the relational properties of your resources into the routing layer.\n\nHere is a simple code example of using restful with `Albums` and `Songs`: <a href=\"https://github.com/flatiron/restful/blob/master/examples/server.js\">https://github.com/flatiron/restful/blob/master/examples/server.js</a>\n\n\n**Protip:** You'll want to browse the restful server using the HTML API explorer in order to see which routes will be created.\n\n## Built-in HTML API Explorer\n\nrestful comes with a built-in HTML API explorer. If you wish to view the current routing map for the router as HTML, simply start the restful server and visit `http://localhost:8000/` in your browser. \n\nIf you prefer to not use this option, set `{ explore: false }`.\n\n**Note:** The API explorer is powered by <a href=\"https://github.com/flatiron/director-explorer\">director-explorer</a>, which will work for ANY <a href=\"https://github.com/flatiron/director\">director</a> router.\n\n\n<a name\"remote\"></a>\n## Exposing Arbitrary Resource Methods\n\nIn many cases, you'll want to expose additional methods on a Resource through the router outside of the included CRUD operations: `create`, `all`, `show`, `update`, `destroy`.\n\nrestful has built in support for easily exposing arbitrary remote resource methods.\n\nConsider the example of a `Creature`. We've already defined all the restful CRUD routes, but a Creature also needs to eat! \n\nSimply create a new method on the `Creature` resource called `feed`.\n\n```js\nCreature.feed = function (_id, options, callback) {\n  callback(null, 'I have been fed');\n}\n```\nThis `feed` method is consider private by default, in that it will not be exposed to the web unless it's set to a `remote` function. To set a resource method to remote, simply:\n\n```js\nCreature.feed.remote = true\n```\n\nIt's easy as that! By setting the `feed` method to remote, the following routes will exist in the `Director` router.\n\n    POST    /creature/1/feed    => Creature.feed()\n    GET     /creature/1/feed    => Creature.feed()\n\n\n## Resource Security\n\nThere are several ways to provide security and authorization for accessing resource methods exposed with restful. The recommended pattern for authorization is to use resourceful's ability for `before` and `after` hooks. In these hooks, you can add additional business logic to restrict access to the resource's methods. \n\nIt is **not** recommended to place authorization logic in the routing layer, as in an ideal world the router will be a reflected interface of the resource. In theory, the security of the router itself should be somewhat irrelevant since the resource could have multiple reflected interfaces that all required the same business logic.\n\n**TL;DR; For security and authorization, you should use resourceful's `before` and `after` hooks.**\n\n\n## Router Customization\n\nRestful provides access to a `Director.router` object. This router is created by the heavily used [Director](github.com/flatiron/director) library.\n\nIf you need to override a generated route, or create an ad-hoc route, or make any customization, the API is *exactly* the same as the Director API.\n\n**customize a reflected router interface:**\n\n```js\napp.router.get('/', function(){\n  this.res.end('home page');\n});\n\n//\n// Overrides `/creature/larry` but won't override,\n// any other `/creature/:id` captures.\n//\napp.router.get('/creature/larry', function(){\n  this.res.end('larry is special!');\n});\n\n```\n\nLike most of Flatiron's reflection libraries, [restful](http://github.com/flatiron/restful) is built to solve 90% of use-cases. If you hit a case where restful is causing a problem, you can simply drop into `Director`. \n\nReflection is *highly* encouraged, but most definitely **optional**.\n\n# Tests\n\n     npm test\n\n# TODO\n\n - Full `resourceful` property type support ( numeric, boolean, array, object )\n - Full `resourceful` nested property schema support\n - Add ability to specify schemas for remote method argument payloads\n - Implement and document browser support\n - Improve Tests\n - Add better error support via `errs` library\n",
  "readmeFilename": "README.md",
  "_id": "restful@0.4.4",
  "_from": "restful@0.4.x"
}
